<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>React Ideas</title>
    <script src="https://npmcdn.com/react@15.3.1/dist/react.min.js"></script>
    <script src="https://npmcdn.com/react-dom@15.3.1/dist/react-dom.min.js"></script>
    <script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
</head>
<body>
    <div id="react"></div>
    <script type="text/babel">

        var IdeasList = React.createClass({
            render: function () {
                var self = this;
                var items = this.props.data.filter(function (item){
                    return item.title.includes(self.props.filter)
                }).map(function(item) {
                    return <li><div><h3>{item.title}</h3><div>{item.type}</div></div></li>
                });
                return <ul>
                            {items}
                       </ul>
            }
        });

        var IdeaForm = React.createClass({
            getInitialState: function() {
                return {title: '', type: 'None'};
            },

            submmited: function (e) {
                e.preventDefault();
                this.props.onSubmit(this.state);
                this.setState({title: ""});
                return false;
            },

            titleChange: function(titleField) {
                this.setState({title: titleField.target.value})
            },

            typeChange: function(typeField) {
                console.log(typeField.target.value)
                this.setState({type: typeField.target.value})
            },

            render: function () {
                return  <form onSubmit={this.submmited}>
                            <input type="text" name="title" value={this.state.title} placeholder="Title" onChange={this.titleChange}/>
                            <select selected={this.state.type} onChange={this.typeChange}>
                                <option value="None">None</option>
                                <option value="Hackathon">Hackathon</option>
                            </select>
                        </form>
            }
        });

        var Ideas = React.createClass({
            getInitialState: function () {
                return {ideas: [], filter: ""};
            },
            addIdea(idea) {
                this.state.ideas.push(idea);
                this.setState({ideas: this.state.ideas})
            },
            render: function () {
                var self = this;
                return  <div>
                            <input type="text" onChange={(function (element){self.setState({filter: element.target.value})})}/>
                            <IdeasList data={this.state.ideas} filter={this.state.filter}/>
                            <IdeaForm onSubmit={this.addIdea}/>
                        </div>
            }
        })

        function log(state) {
            console.log(state);
        }
        ReactDOM.render(<Ideas/>,
            document.getElementById('react')
        );
    </script>
</body>
</html>